<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>IntelliJ IDEA &mdash; 码志</title><link rel="stylesheet" href="https://mazhuang.org/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://mazhuang.org/assets/css/components/collection.css"><link rel="stylesheet" href="https://mazhuang.org/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://mazhuang.org/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://mazhuang.org/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://mazhuang.org/assets/css/globals/common.css"><link rel="stylesheet" href="https://mazhuang.org/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://mazhuang.org/assets/css/posts/index.css"><link rel="stylesheet" href="https://mazhuang.org/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://mazhuang.org/rouge-themes/dist/github.css"><link rel="canonical" href="https://mazhuang.org/wiki/intellij-idea/"><link rel="alternate" type="application/atom+xml" title="码志" href="https://mazhuang.org/feed.xml"><link rel="shortcut icon" href="https://mazhuang.org/favicon.ico"><meta property="og:title" content="IntelliJ IDEA"><meta name="keywords" content="IDEA, Java"><meta name="og:keywords" content="IDEA, Java"><meta name="description" content="快捷键基本与 Android Studio 一致，这里重点记录解决遇到过的问题。"><meta name="og:description" content="快捷键基本与 Android Studio 一致，这里重点记录解决遇到过的问题。"><meta property="og:url" content="https://mazhuang.org/wiki/intellij-idea/"><meta property="og:site_name" content="码志"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2022-11-23"> <script src="https://mazhuang.org/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://mazhuang.org/assets/js/jquery-ui.js"></script> <script src="https://mazhuang.org/assets/js/main.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7093222719567591" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-80669434-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-80669434-1'); </script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://mazhuang.org/" title="码志"><span class="octicon octicon-mark-github"></span> 码志</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://mazhuang.org/" class=" site-header-nav-item" target="" title="首页">首页</a> <a href="https://mazhuang.org/categories/" class=" site-header-nav-item" target="" title="分类">分类</a> <a href="https://mazhuang.org/wiki/" class=" site-header-nav-item" target="" title="维基">维基</a> <a href="https://mazhuang.org/links/" class=" site-header-nav-item" target="" title="链接">链接</a> <a href="https://mazhuang.org/about/" class=" site-header-nav-item" target="" title="关于">关于</a> <a class="mobile-hidden" href="https://mazhuang.org/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="IntelliJ IDEA"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">Java - Tools - IntelliJ IDEA</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://mazhuang.org/wiki/" title="Wiki">Wiki</a> </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://mazhuang.org/wiki/#java" title="Java">Java</a> </span></div></div></div><div class="column one-fourth mobile-hidden"> <img style="height:72px;width:72px" src="https://mazhuang.org/assets/images/qrcode.jpg" alt="闷骚的程序员" /></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><p>快捷键基本与 <a href="https://mazhuang.org/wiki/android-studio/">Android Studio</a> 一致，这里重点记录解决遇到过的问题。</p><h2 id="qa">Q&amp;A</h2><h3 id="如何让代码自动换行显示">如何让代码自动换行显示？</h3><p>Preferences -&gt; Editor -&gt; General，勾选 Soft-wrap these files，后面的文件名匹配改为 <code class="language-plaintext highlighter-rouge">*</code>，表示所有文件都启用自动换行。</p><h3 id="如何加大控制台日志缓冲区大小">如何加大控制台日志缓冲区大小？</h3><p>有时候日志量太大，需要的信息被冲出控制台缓冲区，这种时候可以加大缓冲区大小，让它多缓冲一些行数。</p><p>Preferences -&gt; Editor -&gt; General -&gt; Console，勾选 Override console cycle buffer size，然后修改后面的数字大小，默认是 1024（单位 KB），比如我修改为了 102400。</p><h3 id="解决导入-eclipse-maven-工程后无法读取-xml-文件的问题">解决导入 Eclipse Maven 工程后无法读取 .xml 文件的问题</h3><p>IDEA 与 Eclipse 配置文件目录的方式不同，可以将文件夹标记为 Sources、Resources 和 tests 等，而 src/main/java 默认被标记为 Sources，src/main/resources 才默认被标记为 Resources，编译时自动复制。</p><p>这样放在 src/main/java 目录下的文件与子文件夹均为 Sources，只将编译生成的 .class 文件复制到编译目录，在 Eclipse Maven 工程里放在 src/main/java 文件夹里的 xml、props 和 properties 文件就不会被拷贝到编译文件夹，导致执行时找不到这些文件，报类似下面这样的错误：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [spring-demo.xml]; nested exception is java.io.FileNotFoundException: class path resource [spring-demo.xml] cannot be opened because it does not exist
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:343)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:303)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:216)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:187)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:251)
	at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)
	at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)
	at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:129)
	at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:540)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:454)
	at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)
	at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)
	at org.mazhuang.demo.protocol.db.DemoContext.init(DemoContext.java:22)
	at org.mazhuang.demo.protocol.DemoServer.start(DemoServer.java:40)
	at org.mazhuang.demo.DemoSrv.main(DemoSrv.java:17)
Caused by: java.io.FileNotFoundException: class path resource [spring-demo.xml] cannot be opened because it does not exist
	at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:158)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:329)
	... 15 more
</code></pre></div></div><p><strong>解决方案：</strong></p><p>可以通过在 pom.xml 文件里添加 resources 配置来指定将哪些文件作为 resources 包含：</p><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;resources&gt;</span>
        <span class="nt">&lt;resource&gt;</span>
            <span class="nt">&lt;directory&gt;</span>${basedir}/src/main/java<span class="nt">&lt;/directory&gt;</span>
            <span class="nt">&lt;includes&gt;</span>
                <span class="nt">&lt;include&gt;</span>**/*.props<span class="nt">&lt;/include&gt;</span>
                <span class="nt">&lt;include&gt;</span>**/*.xml<span class="nt">&lt;/include&gt;</span>
            <span class="nt">&lt;/includes&gt;</span>
        <span class="nt">&lt;/resource&gt;</span>
    <span class="nt">&lt;/resources&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></div><h3 id="如何导出-jar-包">如何导出 jar 包</h3><p>File -&gt; Project Structure -&gt; Artifacts -&gt; Click green plus sign -&gt; Jav -&gt; From modules with dependencies</p><p>Build -&gt; Build Artifacts</p><h3 id="去掉-utf-8-文件的-bom">去掉 UTF-8 文件的 BOM</h3><p>UTF-8 文件带 BOM 里会编译报错：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error:(1, 1) error: illegalcharacter: '\ufeff'
</code></pre></div></div><p>解决方法：</p><p>右键项目名称 -&gt; Remove BOM</p><h3 id="freemarker-模板实时生效">FreeMarker 模板实时生效</h3><ol><li><p>在配置文件里关闭 FreeMarker 缓存，设置模板更新延迟时间为 0：</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">spring</span><span class="pi">:</span>
     <span class="na">freemarker</span><span class="pi">:</span>
         <span class="na">cache</span><span class="pi">:</span> <span class="no">false</span>
         <span class="na">settings</span><span class="pi">:</span>
             <span class="na">template_update_delay</span><span class="pi">:</span> <span class="m">0</span>
</code></pre></div></div></li><li><p>修改 IDEA 设置，开启 Build project automatically</p><p><img src="https://mazhuang.org/images/wiki/intellij-idea-auto-build.jpeg" alt="" /></p></li><li><p>双击 shift，输入 registry，然后回车选中图中项：</p><p><img src="https://mazhuang.org/images/wiki/intellij-idea-registry.png" alt="" /></p></li><li><p>找到并勾选 compiler.automake.allow.when.app.running：</p><p><img src="https://mazhuang.org/images/wiki/intellij-idea-auto-make.jpeg" alt="" /></p></li><li><p>重新启动项目。</p><p>修改模板后可能会有几秒延时，刷新两遍就好了。</p></li></ol><h3 id="编辑器面包屑配置">编辑器面包屑配置</h3><ol><li><p>面包屑的显示/隐藏，两种方法：</p><ul><li>菜单 View - Active Editor - Show Breadcrumbs</li><li>右键行号区域 - Breadcrumbs - Top / Bottom / Don’t Show</li></ul></li><li><p>面包屑的位置：</p><p>右键行号区域 - Breadcrumbs - Top / Bottom</p></li></ol><h3 id="提示-invalid-classes-root">提示 Invalid classes root</h3><p>几种可能的解决步骤，可以逐一尝试：</p><ol><li>右键工程 - Run Maven - install -U，右键工程 - Run Maven - Reimport</li><li>File - Project Structure - Libraries - 全选删除，Reimport</li><li>重启 IDEA</li><li>关闭 IDEA，将 .idea 目录删除，重新打开项目</li></ol><h3 id="自动生成-serialversionuid">自动生成 serialVersionUID</h3><p>当一个类实现 Serializable 接口后，在 IDEA 里默认不会提示生成 serialVersionUID。</p><p>做如下配置之后可以实现提示：</p><ol><li>Preferences - Editor - Inspections</li><li>搜索 Serializable class without ‘serialVersionUID’</li><li>勾选该项并确定</li></ol><p><img src="https://mazhuang.org/images/wiki/idea-serializable-settings.png" alt="" /></p><p>提示效果：</p><p><img src="https://mazhuang.org/images/wiki/idea-serializable-inspection.png" alt="" /></p><h3 id="配置打开新建工程的默认-jdk-版本">配置打开/新建工程的默认 JDK 版本</h3><p>打开/新建工程默认会使用比较新的 JDK，比如 JDK 11 或者 14。而在我的实际场景里一般还是需要用 JDK 8，这样每次都要手动设置很不方便。</p><p>设置默认 JDK 的方法：</p><p>File &gt; New Projects Settings &gt; Structure For New Projects</p><h3 id="忽略文件">忽略文件</h3><p>Java 项目里有一些文件是不需要关注的，但它们默认会展示在 Project 视图，甚至会出现在你的搜索结果里，形成干扰。比如 dependency-reduced-pom.xml 和 target 文件夹等。</p><p>如何忽略掉它们呢？</p><p>Preferences &gt; Editor &gt; File Types &gt; Ignore Files and Folders，将文件/文件夹名称加进去，英文分号分隔。</p><h3 id="修改查找的结果显示数量">修改查找的结果显示数量</h3><p>默认显示 100 个查找结果，”100+ matches in X files”，而且无法翻页，所以想将 100 这个限制调大。</p><p>版本 &gt;= 2021.2 的：Settings &gt; Advanced Settings &gt; Maximum number of results to show in Find In Path/Show Usages preview</p><p>老版本：Help &gt; Find Action…Registry &gt; ide.usages.page.size，改成更大的值，比如 10000。</p><h3 id="设置程序测试用例运行的默认-vm-options">设置程序/测试用例运行的默认 VM Options</h3><p>经常需要通过 VM Options 指定一些环境和配置相关的参数，每次有新的程序或者测试用例要执行时都要手动配置非常麻烦。</p><p>设置默认的 VM Options 方法：</p><p>Run &gt; Edit Configurations &gt; Templates</p><p>点选你经常用到的 Template，比如 Spring Boot、JUnit、Tomcat Server &gt; Local，然后在 VM Options 里填上默认参数后保存。</p><p><img src="https://mazhuang.org/images/wiki/idea-default-vm-options.png" alt="" /></p><h3 id="无法-import-自己工程中类">无法 import 自己工程中类</h3><p>File - Invalidate Caches</p><p>参考：https://zhuanlan.zhihu.com/p/341969427</p><h3 id="隐藏-coverage-结果">隐藏 Coverage 结果</h3><p>Run - Show Coverage Data</p><h3 id="编译项目时报-javalangoutofmemoryerror-gc-overhead-limit-exceeded">编译项目时报 java.lang.OutOfMemoryError: GC overhead limit exceeded</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java.lang.OutOfMemoryError: GC overhead limit exceeded
</code></pre></div></div><p>修改 IDEA 的 Custom VM Options 并没有用。</p><p>这是因为运行 IDEA App，和编译的程序，使用不同的 JVM 进程。</p><p>此时需要修改编译配置：</p><p>Preferences - Build, Execution, Deployment - Compiler - Share build process heap size</p><p>默认是 700，我修改成了 4096，单位 Mbytes。</p><p>参考 <a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/206166909-java-lang-OutOfMemoryError-GC-overhead-limit-exceeded">https://intellij-support.jetbrains.com/hc/en-us/community/posts/206166909-java-lang-OutOfMemoryError-GC-overhead-limit-exceeded</a></p><h3 id="更新时提示错误">更新时提示错误</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>IDEA does not have write access to /Application/IntelliJ IDEA.app/Contents. Please run it by a privileged user to update.
</code></pre></div></div><p>原因：最近切换过 MacBook 的用户，IDEA 是在老用户下安装的。</p><p>解决方法：</p><p>将 IntelliJ IDEA.app 目录的权限修改为当前用户。</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo chown -R &lt;current_user&gt;:&lt;user_group&gt; "/Application/IntelliJ IDEA.app"
</code></pre></div></div><h2 id="参考">参考</h2><ul><li><a href="http://www.cnblogs.com/zqr99/p/7642712.html">解决IntelliJ IDEA无法读取配置*.properties文件的问题</a></li><li><a href="https://stackoverflow.com/questions/1082580/how-to-build-jars-from-intellij-properly">How to build jars from IntelliJ properly?</a></li><li><a href="https://stackoverflow.com/questions/44803519/can-i-adjust-the-100-matches-in-x-files-from-intellijs-find-in-path">Can I adjust the “100+ matches in X files” from Intellijs “find in path”</a></li></ul><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="https://mazhuang.org" target="_blank">Zhuang Ma</a></li><li>本文链接：<a href="https://mazhuang.org/wiki/intellij-idea/" target="_blank">https://mazhuang.org/wiki/intellij-idea/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="share"></div><div class="comment"> <script src="https://giscus.app/client.js" data-repo="mzlogin/blog-comments" data-repo-id="MDEwOlJlcG9zaXRvcnk5MzEyNzkxNw==" data-category="Announcements" data-category-id="DIC_kwDOBY0E7c4CRtg9" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async> </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://mazhuang.org/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://mazhuang.org/assets/search_data.json?v=1669204463', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://mazhuang.org/assets/js/jquery.toc.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-7093222719567591" data-ad-slot="5337165236"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></div></div></section><footer class="container"> <ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-7093222719567591" data-ad-slot="9073246172"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2015 <span title="Zhuang Ma">Zhuang Ma</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/mzlogin/mzlogin.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://mazhuang.org/" title="首页" target="">首页</a></li><li> <a href="https://mazhuang.org/categories/" title="分类" target="">分类</a></li><li> <a href="https://mazhuang.org/wiki/" title="维基" target="">维基</a></li><li> <a href="https://mazhuang.org/links/" title="链接" target="">链接</a></li><li> <a href="https://mazhuang.org/about/" title="关于" target="">关于</a></li><li><a href="https://mazhuang.org/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://mazhuang.org/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
